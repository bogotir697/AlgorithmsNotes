#### [[Вопросы к Экзамену]]
---
### Описание
Идея этого алгоритма заключается в том, что строки можно сравнивать с конца. Это позволит пропускать не 1 символ как в наивном алгоритме, а зачастую сразу всю строку. Это возможно, поскольку в тот момент, когда обнаруживается несовпадающий символ между строкой и образцом, образец сдвигается вправо на столько символов, сколько необходимо, чтобы несовпадающий символ строки совпал с символом образца. Если такого символа в образце нет, то строка сдвигается полностью. 
Для составления таблицы используется следующее правило: значение для символа равно максимальному индексу этого элемента в образце (исключая последний символ, для него и всех других значение равно количеству символов в образце).

**Сложность алгоритма:** $O(n + m)$
### Пример
**Текст:** "персональные данные"
**Шаблон:** "данные"

**Таблица:**

| д   | а   | н   | ы   | *   |
| --- | --- | --- | --- | --- |
| 0   | 1   | 3   | 4   | 6   |

**Пошаговый алгоритм:**
<div style="font-family: monospace; background-color: #161b22; padding: 5px 20px 5px 20px; line-height: 1; border-radius: 10px;">
			<p style="margin-top: 5px; margin-bottom: 5px">персо<span style="color: teal">н</span>а<span style="color: orange">л</span>ьные <span style="color: lime"><span style="color: violet">д</span>анные</span></p>
			<p style="margin-top: 5px; margin-bottom: 5px">данны<span style="color: teal">е</span>............. -> не совпал "н" (не совпал в первом символе, индекс 5), сдвигаем на 5 - 3 = 2 (3 по таблице)</p>
			<p style="margin-top: 5px; margin-bottom: 5px">..данны<span style="color: orange">е</span>........... -> не совпал "л", сдвигаем на 6, т.к. символа нет в таблице</p>
			<p style="margin-top: 5px; margin-bottom: 5px">........данны<span style="color: violet">е</span>..... -> не совпал "д" (не совпал в первом символе индекс 5), сдвигаем на 5 - 0 = 5 (0 по таблице)</p>
			<p style="margin-top: 5px; margin-bottom: 5px">.............<span style="color: lime">данные</span> -> совпали</p>
</div>

### Реализация
```python
def BoyerMoore(s: str, sub: str):
	table = {}
	for i in range(len(sub) - 1):
		table[sub[i]] = i
	
	for i in range(len(s)):
		for j in range(len(sub) - 1, -1, -1):
			if sub[j] != s[i + j]:
				step = len(sub)
				if s[i + j] in table.keys(): 
					step = j - table[s[j + i]]
				i = i + step
				break
		else:
			return i
	return -1
```